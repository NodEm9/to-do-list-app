$(document).ready(function(){$("#todo-form").on("submit",function(t){t.preventDefault();let e=$("#todo-input").val();e=(e=(e=e.trim()).charAt(0).toUpperCase()+e.slice(1)).replace(/\s+/g," ");let n=$("<li></li>");if(n.append(e),""===e)return alert("Please enter a value");$("#todo-list").append(n),$("#todo-input").val(""),n.on("dblclick",function(){$(this).toggleClass("strike")});let a=$("<div></div>"),d=$("<button></button>");d.addClass("btn-primary"),d.text("Edit");let i=$("<button></button>");i.addClass("btn-danger"),i.text("X"),i.on("click",function(){n.remove()}),a.append(d),a.append(i),n.append(a),n.attr("draggable",!0),n.on("dragstart",function(t){t.originalEvent.dataTransfer.setData("text/plain",n.index())});let l=$("#todo-list li"),o=[];for(let s=0;s<l.length;s++)o.push(l[s].innerText.slice(0,-5));localStorage.setItem("todoList",JSON.stringify(o))});let t=document.getElementById("todo-list");t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(t){t.preventDefault();let e=t.dataTransfer.getData("text/plain"),n=$("#todo-list li").eq(e),a=$(t.target).closest("li").index();e!==a.toString()&&(n.detach(),e<a?$(t.target).closest("li").after(n):$(t.target).closest("li").before(n))});let e=JSON.parse(localStorage.getItem("todoList"));$(".button").on("click",function(){for(let t=0;t<e.length;t++){let n=$("<li></li>");n.append(e[t]),$("#todo-list").append(n),n.on("dblclick",function(){$(this).toggleClass("strike")});let a=$("<div></div>"),d=$("<button></button>");d.addClass("btn-primary"),d.text("Edit"),d.on("click",function(){let t=$("<div></div>");t.addClass("modal"),t.attr("id","edit-modal");let e=$("<div></div>");e.addClass("modal-content");let d=$("<div></div>");d.addClass("modal-header");let i=$("<h2></h2>");i.text("Edit Todo");let l=$("<div></div>");l.addClass("modal-body text-center");let o=$("<div></div>");o.addClass("modal-footer");let s=$("<span></span>");s.addClass("close"),s.text("X");let p=$("<input></input>");p.attr("type","text"),p.attr("id","edit-input"),p.val(n.text().slice(0,-5));let r=$("<button></button>");r.addClass("btn-primary"),r.text("Save"),d.append(i),d.append(s),l.append(p),o.append(r),e.append(d),e.append(l),e.append(o),t.append(e),$("body").append(t),$("#edit-modal").css("display","block"),s.on("click",function(){$("#edit-modal").css("display","none")}),r.on("click",function(){let t=$("#edit-input").val();t=(t=(t=t.trim()).charAt(0).toUpperCase()+t.slice(1)).replace(/\s+/g," ");let e=$("#edit-input").val(),d=$("#todo-list li").index(n),i=$("#todo-list li"),l=[];for(let o=0;o<i.length;o++)o===d?l.push(e):l.push(i[o].innerText.slice(0,-6));localStorage.setItem("todoList",JSON.stringify(l)),n.text(t),n.append(a),$("#edit-modal").css("display","none")}),t.on("click",function(e){e.target===t[0]&&t.css("display","none")}),window.addEventListener("keydown",function(e){"Escape"===e.key&&t.css("display","none")})});let i=$("<button></button>");i.addClass("btn-danger"),i.text("X"),i.on("click",function(){n.remove()}),a.append(d),a.append(i),n.append(a),n.attr("draggable",!0),n.on("dragstart",function(t){t.originalEvent.dataTransfer.setData("text/plain",n.index())})}})});
function displayTodoList(){let t=$("#todo-list"),e=getSaveTodoList();t.empty(),e.forEach(e=>{let o=$("<li></li>");o.addClass("list-group-item"),o.text(e),t.append(o)})}function saveTodoList(t){localStorage.setItem("todos",JSON.stringify(t))}function getSaveTodoList(){return JSON.parse(localStorage.getItem("todos"))||[]}$(document).ready(function(){$("#todo-form").on("submit",function(t){t.preventDefault();let e=$("#todo-input").val().trim(),o=$("<li></li>");if(""!==e){let a=getSaveTodoList();a.push(e),saveTodoList(a),displayTodoList(),$("#todo-input").val("")}let d=$("<input></input>");d.attr("type","checkbox"),d.attr("id","checkbox"),d.attr("class","checkbox"),d.prependTo(o),d.on("click",function(){o.toggleClass("strike")}),o.on("dblclick",function(){$(this).toggleClass("strike")});let n=$("<div></div>"),i=$("<button></button>");i.addClass("btn-primary"),i.text("Edit");let l=$("<button></button>");l.addClass("btn-danger"),l.text("Delete"),l.on("click",function(){d.prop("checked")?d.prop("checked")?!0===confirm("Are you sure you want to delete this task?")&&(o.remove(),localStorage.removeItem("todos",JSON.stringify(todo))):AbortController():alert("Please mark the task as completed before deleting it")}),n.append(i),n.append(l),o.attr("draggable",!0),o.on("dragstart",function(t){t.originalEvent.dataTransfer.setData("text/plain",o.index())}),o.append(todo),o.append(n)});let t=document.getElementById("todo-list");t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(t){t.preventDefault();let e=t.dataTransfer.getData("text/plain"),o=$("#todo-list li").eq(e),a=$(t.target).closest("li").index();e!==a.toString()&&(o.detach(),e<a?$(t.target).closest("li").after(o):$(t.target).closest("li").before(o))});let e=getSaveTodoList();$(".button").on("click",function(){for(let t of e){let o=$("<li></li>");o.append(t),$("#todo-list").append(o),o.on("dblclick",function(){$(this).toggleClass("strike")});let a=$("<input></input>");a.attr("type","checkbox"),a.attr("id","checkbox"),a.attr("class","checkbox"),a.prependTo(o),a.on("click",function(){o.toggleClass("strike")});let d=$("<div></div>"),n=$("<button></button>");n.addClass("btn-primary"),n.text("Edit");let i=$("<button></button>");i.addClass("btn-danger"),i.text("Delete"),i.on("click",function(){a.prop("checked")?a.prop("checked")?!0===confirm("Are you sure you want to delete this task?")&&(o.remove(),localStorage.removeItem("todos",JSON.stringify(t))):(AbortController(),location.replace(location.href.split("#")[0])):alert("Please mark the task as completed before deleting it")}),n.on("click",function(){let e=$("<div></div>");e.addClass("modal"),e.attr("id","edit-modal");let a=$("<div></div>");a.addClass("modal-header");let d=$("<h2></h2>");d.text("Edit Todo");let n=$("<div></div>");n.addClass("modal-body text-center");let i=$("<div></div>");i.addClass("modal-content");let l=$("<div></div>");l.addClass("modal-footer");let s=$("<span></span>");s.addClass("close"),s.text("X");let r=$("<input></input>");r.attr("type","text"),r.attr("id","edit-input"),r.val(o.text().slice(0,-10));let p=$("<button></button>");p.addClass("btn-primary"),p.text("Save"),a.append(d),a.append(s),n.append(r),l.append(p),i.append(a),i.append(n),i.append(l),e.append(i),$("body").append(e),p.on("click",function(){let e=r.val();e+="  (edited)",e=(e=e.trim()).charAt(0).toUpperCase()+e.slice(1).toLowerCase();let a=getSaveTodoList();a[a.indexOf(t)]=e,saveTodoList(a),o.text(e),$("#edit-modal").remove()}),s.on("click",function(){$("#edit-modal").remove()}),e.on("click",function(t){t.target===e[0]&&e.remove()}),window.addEventListener("keydown",function(t){"Escape"===t.key&&e.remove()})}),d.append(n),d.append(i),o.append(d),o.attr("draggable",!0),o.on("dragstart",function(t){t.originalEvent.dataTransfer.setData("text/plain",o.index())})}})}),displayTodoList();